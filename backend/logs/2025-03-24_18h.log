{"level":30,"time":"2025-03-24T15:05:10.142Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:05:20.868Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:05:36.568Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:05:57.877Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":50,"time":"2025-03-24T15:07:38.695Z","module":"database","err":{"type":"DatabaseError","message":"column \"parent_type\" of relation \"reviews\" does not exist","stack":"error: column \"parent_type\" of relation \"reviews\" does not exist\n    at /Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/node_modules/pg/lib/client.js:535:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async client.query (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/config/db.js:68:19)\n    at async Review.create (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/models/review.js:85:28)\n    at async exports.createReview (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/controllers/reviewController.js:67:23)","length":131,"name":"error","severity":"ERROR","code":"42703","position":"70","file":"parse_target.c","line":"1066","routine":"checkInsertTargets"},"query":"\n        INSERT INTO reviews (title, description, rating, parent_id, parent_type)\n        VALUES ($1, $2, $3, $4, $5)\n        RETURNING *;\n      ","params":["1","ацшув",5,"1df89b1a-2274-46fa-a596-40dc8a9fcf15","product"],"msg":"Ошибка выполнения транзакционного запроса"}
{"level":30,"time":"2025-03-24T15:08:16.071Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:08:20.508Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:08:21.999Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:08:45.446Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:08:57.078Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:09:37.326Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:09:38.618Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:09:39.800Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:10:17.196Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:10:24.228Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:10:30.363Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:10:35.299Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":50,"time":"2025-03-24T15:10:45.289Z","module":"database","err":{"type":"DatabaseError","message":"column \"parent_type\" does not exist","stack":"error: column \"parent_type\" does not exist\n    at /Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.query (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/config/db.js:36:17)\n    at async Product.updateRating (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/models/product.js:338:22)\n    at async Review.create (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/models/review.js:89:9)\n    at async exports.createReview (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/controllers/reviewController.js:66:23)","length":112,"name":"error","severity":"ERROR","code":"42703","position":"139","file":"parse_relation.c","line":"3722","routine":"errorMissingColumn"},"query":"\n      UPDATE products\n      SET rating = (\n        SELECT COALESCE(AVG(rating), 0)\n        FROM reviews\n        WHERE parent_id = $1 AND parent_type = 'product'\n      )\n      WHERE id = $1\n      RETURNING rating;\n    ","params":["0c62086e-9696-4e23-9cbb-21881d6a3538"],"msg":"Ошибка выполнения запроса"}
{"level":30,"time":"2025-03-24T15:12:45.062Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:12:48.037Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:00.398Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:03.243Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:13.127Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:16.981Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:21.238Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:28.433Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:13:54.950Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":50,"time":"2025-03-24T15:14:03.696Z","module":"database","err":{"type":"DatabaseError","message":"column \"parent_type\" does not exist","stack":"error: column \"parent_type\" does not exist\n    at /Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/node_modules/pg-pool/index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.query (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/config/db.js:36:17)\n    at async Product.updateRating (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/models/product.js:338:22)\n    at async Review.create (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/models/review.js:89:9)\n    at async exports.createReview (/Users/vladislavmolcanov/Documents/GitHub/e-flower-shop/backend/controllers/reviewController.js:66:23)","length":112,"name":"error","severity":"ERROR","code":"42703","position":"139","file":"parse_relation.c","line":"3722","routine":"errorMissingColumn"},"query":"\n      UPDATE products\n      SET rating = (\n        SELECT COALESCE(AVG(rating), 0)\n        FROM reviews\n        WHERE parent_id = $1 AND parent_type = 'product'\n      )\n      WHERE id = $1\n      RETURNING rating;\n    ","params":["0c62086e-9696-4e23-9cbb-21881d6a3538"],"msg":"Ошибка выполнения запроса"}
{"level":30,"time":"2025-03-24T15:14:29.106Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:15:36.622Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:16:33.229Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:16:34.425Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:16:39.471Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:23:19.748Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:23:20.725Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:23:22.824Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:26:43.027Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:26:45.357Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:28:14.187Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:28:18.007Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:28:23.751Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:04.490Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:07.817Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:10.419Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:12.490Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:15.702Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:22.212Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:29:24.611Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:36:23.617Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
{"level":30,"time":"2025-03-24T15:50:59.627Z","module":"database","msg":"Подключение к PostgreSQL успешно установлено"}
